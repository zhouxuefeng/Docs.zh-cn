<span data-ttu-id="50f23-101">将“Controllers/HelloWorldController.cs”的内容替换为以下内容：</span><span class="sxs-lookup"><span data-stu-id="50f23-101">Replace the contents of *Controllers/HelloWorldController.cs* with the following:</span></span>

[!code-csharp[Main](../../tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Controllers/HelloWorldController.cs?name=snippet_1)]

<span data-ttu-id="50f23-102">控制器中的每个 `public` 方法均可作为 HTTP 终结点调用。</span><span class="sxs-lookup"><span data-stu-id="50f23-102">Every `public` method in a controller is callable as an HTTP endpoint.</span></span> <span data-ttu-id="50f23-103">上述示例中，两种方法均返回一个字符串。</span><span class="sxs-lookup"><span data-stu-id="50f23-103">In the sample above, both methods return a string.</span></span>  <span data-ttu-id="50f23-104">请注意每个方法前面的注释。</span><span class="sxs-lookup"><span data-stu-id="50f23-104">Note the comments preceding each method.</span></span>

<span data-ttu-id="50f23-105">HTTP 终结点是 Web 应用程序中可定向的 URL（例如 `http://localhost:1234/HelloWorld`），其中结合了所用的协议 `HTTP`、TCP 端口等 Web 服务器的网络位置 `localhost:1234`，以及目标 URI `HelloWorld`。</span><span class="sxs-lookup"><span data-stu-id="50f23-105">An HTTP endpoint is a targetable URL in the web application, such as `http://localhost:1234/HelloWorld`, and combines the protocol used: `HTTP`, the network location of the web server (including the TCP port): `localhost:1234` and the target URI `HelloWorld`.</span></span>

<span data-ttu-id="50f23-106">第一条注释指出这是一个 [HTTP GET](https://www.w3schools.com/tags/ref_httpmethods.asp) 方法，它通过向基 URL 追加“/HelloWorld/”进行调用。</span><span class="sxs-lookup"><span data-stu-id="50f23-106">The first comment states this is an [HTTP GET](https://www.w3schools.com/tags/ref_httpmethods.asp) method that is invoked by appending "/HelloWorld/" to the base URL.</span></span> <span data-ttu-id="50f23-107">第二条注释指定一个 [HTTP GET](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html) 方法，它通过向 URL 追加“/HelloWorld/Welcome/”进行调用。</span><span class="sxs-lookup"><span data-stu-id="50f23-107">The second comment specifies an [HTTP GET](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html) method that is invoked by appending "/HelloWorld/Welcome/" to the URL.</span></span> <span data-ttu-id="50f23-108">本教程稍后将使用基架引擎生成 `HTTP POST` 方法。</span><span class="sxs-lookup"><span data-stu-id="50f23-108">Later on in the tutorial you'll use the scaffolding engine to generate `HTTP POST` methods.</span></span>

<span data-ttu-id="50f23-109">在非调试模式下运行应用，并将“HelloWorld”追加到地址栏中的路径。</span><span class="sxs-lookup"><span data-stu-id="50f23-109">Run the app in non-debug mode and append "HelloWorld" to the path in the address bar.</span></span> <span data-ttu-id="50f23-110">`Index` 方法返回一个字符串。</span><span class="sxs-lookup"><span data-stu-id="50f23-110">The `Index` method returns a string.</span></span>

![显示“这是我的默认操作”应用程序响应的浏览器窗口](../../tutorials/first-mvc-app/adding-controller/_static/hell1.png)

<span data-ttu-id="50f23-112">MVC 根据入站 URL 调用控制器类（及其中的操作方法）。</span><span class="sxs-lookup"><span data-stu-id="50f23-112">MVC invokes controller classes (and the action methods within them) depending on the incoming URL.</span></span> <span data-ttu-id="50f23-113">MVC 所用的默认 [URL 路由逻辑](../../mvc/controllers/routing.md)使用如下格式来确定调用的代码：</span><span class="sxs-lookup"><span data-stu-id="50f23-113">The default [URL routing logic](../../mvc/controllers/routing.md) used by MVC uses a format like this to determine what code to invoke:</span></span>

`/[Controller]/[ActionName]/[Parameters]`

<span data-ttu-id="50f23-114">在“Startup.cs”文件中设置路由格式。</span><span class="sxs-lookup"><span data-stu-id="50f23-114">You set the format for routing in the *Startup.cs* file.</span></span>

[!code-csharp[Main](../../tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Startup.cs?name=snippet_1&highlight=5)]

<span data-ttu-id="50f23-115">如果运行应用且不提供任何 URL 段，它将默认为上面突出显示的模板行中指定的“Home”控制器和“Index”方法。</span><span class="sxs-lookup"><span data-stu-id="50f23-115">When you run the app and don't supply any URL segments, it defaults to the "Home" controller and the "Index" method specified in the template line highlighted above.</span></span>

<span data-ttu-id="50f23-116">第一个 URL 段决定要运行的控制器类。</span><span class="sxs-lookup"><span data-stu-id="50f23-116">The first URL segment determines the controller class to run.</span></span> <span data-ttu-id="50f23-117">因此 `localhost:xxxx/HelloWorld` 映射到 `HelloWorldController` 类。</span><span class="sxs-lookup"><span data-stu-id="50f23-117">So `localhost:xxxx/HelloWorld` maps to the `HelloWorldController` class.</span></span> <span data-ttu-id="50f23-118">该 URL 段的第二部分决定类上的操作方法。</span><span class="sxs-lookup"><span data-stu-id="50f23-118">The second part of the URL segment determines the action method on the class.</span></span> <span data-ttu-id="50f23-119">因此 `localhost:xxxx/HelloWorld/Index` 将触发 `HelloWorldController` 类的 `Index` 运行。</span><span class="sxs-lookup"><span data-stu-id="50f23-119">So `localhost:xxxx/HelloWorld/Index` would cause the `Index` method of the `HelloWorldController` class to run.</span></span> <span data-ttu-id="50f23-120">请注意，只需浏览到 `localhost:xxxx/HelloWorld`，而 `Index` 方法默认调用。</span><span class="sxs-lookup"><span data-stu-id="50f23-120">Notice that you only had to browse to `localhost:xxxx/HelloWorld` and the `Index` method was called by default.</span></span> <span data-ttu-id="50f23-121">原因是 `Index` 是默认方法，如果未显式指定方法名称，则将在控制器上调用它。</span><span class="sxs-lookup"><span data-stu-id="50f23-121">This is because `Index` is the default method that will be called on a controller if a method name is not explicitly specified.</span></span> <span data-ttu-id="50f23-122">URL 段的第三部分 (`id`) 针对的是路由数据。</span><span class="sxs-lookup"><span data-stu-id="50f23-122">The third part of the URL segment ( `id`) is for route data.</span></span> <span data-ttu-id="50f23-123">稍后可在本教程中看到路由数据。</span><span class="sxs-lookup"><span data-stu-id="50f23-123">You'll see route data later on in this tutorial.</span></span>

<span data-ttu-id="50f23-124">浏览到 `http://localhost:xxxx/HelloWorld/Welcome`。</span><span class="sxs-lookup"><span data-stu-id="50f23-124">Browse to `http://localhost:xxxx/HelloWorld/Welcome`.</span></span> <span data-ttu-id="50f23-125">`Welcome` 方法运行并返回字符串“这是 Welcome 操作方法...”。</span><span class="sxs-lookup"><span data-stu-id="50f23-125">The `Welcome` method runs and returns the string "This is the Welcome action method...".</span></span> <span data-ttu-id="50f23-126">对于此 URL，采用 `HelloWorld` 控制器和 `Welcome` 操作方法。</span><span class="sxs-lookup"><span data-stu-id="50f23-126">For this URL, the controller is `HelloWorld` and `Welcome` is the action method.</span></span> <span data-ttu-id="50f23-127">目前尚未使用 URL 的 `[Parameters]` 部分。</span><span class="sxs-lookup"><span data-stu-id="50f23-127">You haven't used the `[Parameters]` part of the URL yet.</span></span>

![显示“这是 Welcome 操作方法”应用程序响应的浏览器窗口](../../tutorials/first-mvc-app/adding-controller/_static/welcome.png)

<span data-ttu-id="50f23-129">修改代码，将一些参数信息从 URL 传递到控制器。</span><span class="sxs-lookup"><span data-stu-id="50f23-129">Modify the code to pass some parameter information from the URL to the controller.</span></span> <span data-ttu-id="50f23-130">例如 `/HelloWorld/Welcome?name=Rick&numtimes=4`。</span><span class="sxs-lookup"><span data-stu-id="50f23-130">For example, `/HelloWorld/Welcome?name=Rick&numtimes=4`.</span></span> <span data-ttu-id="50f23-131">更改 `Welcome` 方法以包括以下代码中显示的两个参数：</span><span class="sxs-lookup"><span data-stu-id="50f23-131">Change the `Welcome` method to include two parameters as shown in the following code.</span></span> 

[!code-csharp[Main](../../tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Controllers/HelloWorldController.cs?name=snippet_2)]

<span data-ttu-id="50f23-132">前面的代码：</span><span class="sxs-lookup"><span data-stu-id="50f23-132">The preceding code:</span></span>

* <span data-ttu-id="50f23-133">使用 C# 可选参数功能指示，未为 `numTimes` 参数传递值时该参数默认为 1。</span><span class="sxs-lookup"><span data-stu-id="50f23-133">Uses the C# optional-parameter feature to indicate that the `numTimes` parameter defaults to 1 if no value is passed for that parameter.</span></span>
* <span data-ttu-id="50f23-134">使用 `HtmlEncoder.Default.Encode` 防止恶意输入（即 JavaScript）损害应用。</span><span class="sxs-lookup"><span data-stu-id="50f23-134">Uses`HtmlEncoder.Default.Encode` to protect the app from malicious input (namely JavaScript).</span></span> 
* <span data-ttu-id="50f23-135">使用[内插字符串](https://docs.microsoft.com/dotnet/articles/csharp/language-reference/keywords/interpolated-strings)。</span><span class="sxs-lookup"><span data-stu-id="50f23-135">Uses [Interpolated Strings](https://docs.microsoft.com/dotnet/articles/csharp/language-reference/keywords/interpolated-strings).</span></span>

<span data-ttu-id="50f23-136">运行应用并浏览到：</span><span class="sxs-lookup"><span data-stu-id="50f23-136">Run your app and browse to:</span></span>

   `http://localhost:xxxx/HelloWorld/Welcome?name=Rick&numtimes=4`

<span data-ttu-id="50f23-137">（将 xxxx 替换为端口号。）可在 URL 中对 `name` 和 `numtimes` 使用其他值。</span><span class="sxs-lookup"><span data-stu-id="50f23-137">(Replace xxxx with your port number.) You can try different values for `name` and `numtimes` in  the URL.</span></span> <span data-ttu-id="50f23-138">MVC [模型绑定](../../mvc/models/model-binding.md)系统可将命名参数从地址栏中的查询字符串自动映射到方法中的参数。</span><span class="sxs-lookup"><span data-stu-id="50f23-138">The MVC [model binding](../../mvc/models/model-binding.md) system automatically maps the named parameters from  the query string in the address bar to parameters in your method.</span></span> <span data-ttu-id="50f23-139">有关详细信息，请参阅[模型绑定](../../mvc/models/model-binding.md)。</span><span class="sxs-lookup"><span data-stu-id="50f23-139">See [Model Binding](../../mvc/models/model-binding.md) for more information.</span></span>

![显示“你好 Rick，NumTimes 为 4”应用程序响应的浏览器窗口](../../tutorials/first-mvc-app/adding-controller/_static/rick4.png)

<span data-ttu-id="50f23-141">在上图中，未使用 URL 段 (`Parameters`)，且 `name` 和 `numTimes` 参数作为[查询字符串](https://wikipedia.org/wiki/Query_string)进行传递。</span><span class="sxs-lookup"><span data-stu-id="50f23-141">In the image above, the URL segment (`Parameters`) is not used, the `name` and `numTimes` parameters are passed as [query strings](https://wikipedia.org/wiki/Query_string).</span></span> <span data-ttu-id="50f23-142">上述 URL 中的 `?`（问号）为分隔符，后接查询字符串。</span><span class="sxs-lookup"><span data-stu-id="50f23-142">The `?` (question mark) in the above URL is a separator, and the query strings follow.</span></span> <span data-ttu-id="50f23-143">`&` 字符用于分隔查询字符串。</span><span class="sxs-lookup"><span data-stu-id="50f23-143">The `&` character separates query strings.</span></span>

<span data-ttu-id="50f23-144">将 `Welcome` 方法替换为以下代码：</span><span class="sxs-lookup"><span data-stu-id="50f23-144">Replace the `Welcome` method with the following code:</span></span>

[!code-csharp[Main](../../tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Controllers/HelloWorldController.cs?name=snippet_3)]

<span data-ttu-id="50f23-145">运行应用并输入以下 URL：`http://localhost:xxx/HelloWorld/Welcome/3?name=Rick`</span><span class="sxs-lookup"><span data-stu-id="50f23-145">Run the app and enter the following URL:  `http://localhost:xxx/HelloWorld/Welcome/3?name=Rick`</span></span>

![显示“你好 Rick，ID 为 3”应用程序响应的浏览器窗口](../../tutorials/first-mvc-app/adding-controller/_static/rick_routedata.png)

<span data-ttu-id="50f23-147">此时，第三个 URL 段与路由参数 `id` 相匹配。</span><span class="sxs-lookup"><span data-stu-id="50f23-147">This time the third URL segment  matched the route parameter `id`.</span></span> <span data-ttu-id="50f23-148">`Welcome` 方法包含 `MapRoute` 方法中匹配 URL 模板的参数 `id`。</span><span class="sxs-lookup"><span data-stu-id="50f23-148">The `Welcome`  method contains a parameter  `id` that matched the URL template in the `MapRoute` method.</span></span> <span data-ttu-id="50f23-149">后面的 `?`（`id?` 中）表示 `id` 参数可选。</span><span class="sxs-lookup"><span data-stu-id="50f23-149">The trailing `?`  (in `id?`) indicates the `id` parameter is optional.</span></span>

[!code-csharp[Main](../../tutorials/first-mvc-app/start-mvc/sample/MvcMovie/Startup.cs?name=snippet_1&highlight=5)]

<span data-ttu-id="50f23-150">上述示例中，控制器始终执行 MVC 的“VC”部分，即视图和控制器工作。</span><span class="sxs-lookup"><span data-stu-id="50f23-150">In these examples the controller has been doing the "VC" portion  of MVC - that is, the view and controller work.</span></span> <span data-ttu-id="50f23-151">控制器将直接返回 HTML。</span><span class="sxs-lookup"><span data-stu-id="50f23-151">The controller is returning HTML  directly.</span></span> <span data-ttu-id="50f23-152">通常不希望控制器直接返回 HTML，因为编码和维护非常繁琐。</span><span class="sxs-lookup"><span data-stu-id="50f23-152">Generally you don't want controllers returning HTML directly, since  that becomes very cumbersome to code and maintain.</span></span> <span data-ttu-id="50f23-153">通常，需使用单独的 Razor 视图模板文件来帮助生成 HTML 响应。</span><span class="sxs-lookup"><span data-stu-id="50f23-153">Instead you typically use a separate Razor view template file to help generate the HTML response.</span></span> <span data-ttu-id="50f23-154">可在下一教程中执行该操作。</span><span class="sxs-lookup"><span data-stu-id="50f23-154">You do that in the next tutorial.</span></span>
